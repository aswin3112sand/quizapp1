<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head('Aswin Quiz – Manage Questions')}"></head>
<body data-bs-theme="dark" class="page-admin">
  <img src="/img/bg1.jpg" th:src="@{/img/bg1.jpg}" class="bg-img bg1" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg2.jpg" th:src="@{/img/bg2.jpg}" class="bg-img bg2" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg3.jpg" th:src="@{/img/bg3.jpg}" class="bg-img bg3" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg4.jpg" th:src="@{/img/bg4.jpg}" class="bg-img bg4" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg5.jpg" th:src="@{/img/bg5.jpg}" class="bg-img bg5" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg6.jpg" th:src="@{/img/bg6.jpg}" class="bg-img bg6" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg7.jpg" th:src="@{/img/bg7.jpg}" class="bg-img bg7" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg8.jpg" th:src="@{/img/bg8.jpg}" class="bg-img bg8" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg9.jpg" th:src="@{/img/bg9.jpg}" class="bg-img bg9" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg10.jpg" th:src="@{/img/bg10.jpg}" class="bg-img bg10" alt="" loading="lazy" decoding="async" />

  <div th:replace="~{fragments/navbar :: navbar}"></div>

  <main class="container py-5">
    <section class="glass card-premium" data-reveal="up">
      <div class="d-flex justify-content-between flex-wrap gap-3 mb-4">
        <div>
          <p class="badge-soft mb-1" th:text="${quiz.title}">Quiz</p>
          <h1 class="h4 mb-0">Question bank</h1>
          <small class="text-muted">Edit, duplicate, அல்லது delete செய்து விடுங்கள்.</small>
        </div>
        <a class="btn btn-primary neon" th:href="@{/admin/questions/new}" data-ripple data-shimmer>New question</a>
      </div>

      <div class="table-responsive">
        <table class="table-premium">
          <thead>
            <tr>
              <th>ID</th>
              <th>Question</th>
              <th>Correct index</th>
              <th class="text-end">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="question : ${questions}">
              <td th:text="${question.id}">1</td>
              <td th:text="${question.text}">Sample question</td>
              <td th:text="${question.correctIndex}">0</td>
              <td class="text-end">
                <div class="d-flex justify-content-end gap-2">
                  <a class="btn btn-sm btn-warning"
                     th:href="@{/admin/questions/edit/{id}(id=${question.id})}">
                    Edit
                  </a>
                  <form th:action="@{/admin/questions/delete/{id}(id=${question.id})}"
                        method="post"
                        class="d-inline"
                        onsubmit="return confirm('Delete this question?');">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    <button class="btn btn-sm btn-danger" type="submit">Delete</button>
                  </form>
                </div>
              </td>
            </tr>
            <tr th:if="${#lists.isEmpty(questions)}">
              <td colspan="4" class="text-center text-muted">No questions yet</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <div th:replace="~{fragments/footer :: footer}"></div>
  <script src="../static/js/app.js" th:src="@{/js/app.js}" defer></script>
</body>
</html>
