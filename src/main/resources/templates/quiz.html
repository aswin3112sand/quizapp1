<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments/head :: head('Aswin Quiz â€“ Take Quiz')}"></head>
<body data-bs-theme="dark" class="page-quiz">
  <img src="/img/bg1.jpg" th:src="@{/img/bg1.jpg}" class="bg-img bg1" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg2.jpg" th:src="@{/img/bg2.jpg}" class="bg-img bg2" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg3.jpg" th:src="@{/img/bg3.jpg}" class="bg-img bg3" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg4.jpg" th:src="@{/img/bg4.jpg}" class="bg-img bg4" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg5.jpg" th:src="@{/img/bg5.jpg}" class="bg-img bg5" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg6.jpg" th:src="@{/img/bg6.jpg}" class="bg-img bg6" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg7.jpg" th:src="@{/img/bg7.jpg}" class="bg-img bg7" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg8.jpg" th:src="@{/img/bg8.jpg}" class="bg-img bg8" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg9.jpg" th:src="@{/img/bg9.jpg}" class="bg-img bg9" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg10.jpg" th:src="@{/img/bg10.jpg}" class="bg-img bg10" alt="" loading="lazy" decoding="async" />

  <div th:replace="~{fragments/navbar :: navbar}"></div>

  <main class="container py-5">
    <section class="glass card-premium quiz-hero" data-reveal="up">
      <div>
        <p class="badge-soft mb-1">Plan your next challenge</p>
        <h1 class="hero-title mb-2" th:text="${quiz.title}">Quiz title</h1>
        <p class="text-muted" th:text="${quiz.description}">Quiz description</p>
      </div>
      <div class="hero-stats">
        <div>
          <span class="label">Questions</span>
          <strong th:text="${totalQuestions}">10</strong>
        </div>
        <div>
          <span class="label">Duration</span>
          <strong th:text="${(quiz.durationSeconds / 60)} + ' min'">3 min</strong>
        </div>
      </div>
    </section>

    <section class="glass question-stack" data-reveal="fade">
      <div class="quiz-meta d-flex flex-column flex-md-row justify-content-between gap-3 mb-4">
        <label class="text-muted mb-0">
          <span>Display name (optional)</span>
          <input class="form-control mt-2" type="text" name="username" form="quizForm" placeholder="Your name for leaderboard">
        </label>
        <div class="timer-pill">
          <span>Time left</span>
          <strong id="timeLeft">03:00</strong>
        </div>
      </div>

      <form id="quizForm"
            th:action="@{/submit}"
            method="post"
            th:attr="data-duration=${quiz.durationSeconds}">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
        <article class="question-card" th:each="question, iter : ${questions}" th:attr="data-question-id=${question.id}">
          <p class="fw-semibold mb-3">
            <span th:text="${iter.index + 1} + '. ' + ${question.text}">1. Question text</span>
          </p>
          <label class="option-pill" th:each="option, optIter : ${question.options}">
            <input type="radio"
                   th:name="${'answers[' + question.id + ']'}"
                   th:value="${optIter.index}">
            <span th:text="${option}">Option</span>
          </label>
        </article>
        <div class="quiz-submit">
          <button class="btn btn-primary neon w-100" type="submit" data-ripple data-shimmer>Submit quiz</button>
        </div>
      </form>
    </section>
  </main>

  <div th:replace="~{fragments/footer :: footer}"></div>
  <script src="../static/js/app.js" th:src="@{/js/app.js}" defer></script>
  <script src="../static/js/quiz.js" th:src="@{/js/quiz.js}" defer></script>
</body>
</html>
