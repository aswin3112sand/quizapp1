<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments/head :: head(${quiz.title})}"></head>
<body data-bs-theme="dark" class="page-quiz">
  <img src="/img/bg1.jpg" th:src="@{/img/bg1.jpg}" class="bg-img bg1" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg2.jpg" th:src="@{/img/bg2.jpg}" class="bg-img bg2" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg3.jpg" th:src="@{/img/bg3.jpg}" class="bg-img bg3" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg4.jpg" th:src="@{/img/bg4.jpg}" class="bg-img bg4" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg5.jpg" th:src="@{/img/bg5.jpg}" class="bg-img bg5" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg6.jpg" th:src="@{/img/bg6.jpg}" class="bg-img bg6" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg7.jpg" th:src="@{/img/bg7.jpg}" class="bg-img bg7" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg8.jpg" th:src="@{/img/bg8.jpg}" class="bg-img bg8" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg9.jpg" th:src="@{/img/bg9.jpg}" class="bg-img bg9" alt="" loading="lazy" decoding="async" />
  <img src="/img/bg10.jpg" th:src="@{/img/bg10.jpg}" class="bg-img bg10" alt="" loading="lazy" decoding="async" />

  <div th:replace="~{fragments/navbar :: navbar}"></div>

  <main class="container">
    <section class="glass quiz-progress" data-reveal="fade">
      <!-- why: sticky progress bar -->
      <div class="d-flex justify-content-between flex-wrap gap-2">
        <div>
          <p class="mb-0 fw-semibold" th:text="${quiz.title}">Quiz title</p>
          <small class="text-muted" th:text="${quiz.description}">Quiz description</small>
        </div>
        <div class="text-muted" th:text="${currentIndex} + ' / ' + ${totalQuestions}">1 / 10</div>
      </div>
      <div class="progress-neon mt-2"
           role="progressbar"
           aria-valuemin="0"
           aria-valuemax="100"
           th:attr="aria-valuenow=${progressPercent}, data-progress=${progressPercent}"
           th:style="'--progress:' + ${progressPercent} + '%'">
        <span></span>
      </div>
    </section>

    <!-- why: questions stack -->
    <section class="glass question-stack" data-reveal="up">
      <form th:action="@{'/quiz/' + ${quiz.id} + '/submit'}" action="/quiz/submit" method="post" class="question-stack">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <article class="glass question-card" th:each="q,iter : ${questions}">
          <p class="fw-semibold mb-2" th:text="${iter.index + 1} + '. ' + ${q.text}">1. Question text?</p>
          <label class="option-pill" th:each="opt,optIter : ${q.options}">
            <input type="radio"
                   th:name="${'answers[' + q.id + ']'}"
                   th:value="${optIter.index}"
                   required />
            <span th:text="${opt}">Option</span>
          </label>
        </article>
        <div class="quiz-submit">
          <button class="btn btn-primary neon" type="submit" data-ripple data-shimmer>Submit answers</button>
        </div>
      </form>
    </section>
  </main>

  <div th:replace="~{fragments/footer :: footer}"></div>
  <script src="../static/js/app.js" th:src="@{/js/app.js}" defer></script>
</body>
</html>
